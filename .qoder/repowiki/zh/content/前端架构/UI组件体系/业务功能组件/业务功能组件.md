# 业务功能组件

<cite>
**Referenced Files in This Document**   
- [TransactionExecutor.tsx](file://src/components/Blockchain/TransactionExecutor.tsx)
- [KYCVerification.tsx](file://src/components/Compliance/KYCVerification.tsx)
- [WalletConnect.tsx](file://src/components/Wallet/WalletConnect.tsx)
- [Analytics.tsx](file://src/components/Analytics/Analytics.tsx)
- [RiskMonitoring.tsx](file://src/components/Risk/RiskMonitoring.tsx)
- [OTCTrading.tsx](file://src/components/OTC/OTCTrading.tsx)
- [CurrencyExchange.tsx](file://src/components/Exchange/CurrencyExchange.tsx)
- [Header.tsx](file://src/components/Layout/Header.tsx)
- [MobileMenu.tsx](file://src/components/Layout/MobileMenu.tsx)
- [NotificationCenter.tsx](file://src/components/Notifications/NotificationCenter.tsx)
- [BRICSModule.tsx](file://src/components/BRICSModule.tsx)
- [ComplianceModule.tsx](file://src/components/ComplianceModule.tsx)
</cite>

## 目录
1. [交易执行组件](#交易执行组件)
2. [合规验证组件](#合规验证组件)
3. [钱包管理组件](#钱包管理组件)
4. [监控类组件](#监控类组件)
5. [实时汇率集成组件](#实时汇率集成组件)
6. [响应式布局组件](#响应式布局组件)
7. [模块化组件](#模块化组件)

## 交易执行组件

`TransactionExecutor` 组件实现了完整的区块链交易执行流程，包含状态管理和区块链服务调用。该组件通过 `wagmi` 库管理钱包连接状态，并使用 `WalletService` 服务类与区块链网络交互。交易流程分为六个步骤：验证交易参数、检查余额、计算Gas费用、发起交易、等待确认和交易完成。

组件通过 `useState` 管理交易状态，包括执行状态、交易结果和步骤进度。`executeTransaction` 函数处理完整的交易流程，首先验证交易参数，然后检查钱包余额是否充足，接着计算Gas费用，最后调用 `walletService.transferStablecoin` 发起交易。交易成功后，会通过 `fetch` 调用后端API记录交易信息。

错误处理机制完善，捕获异常后会更新当前步骤状态为失败，并显示错误信息。组件还提供了重置功能，允许用户发起新交易。UI设计直观，通过进度条和步骤指示器清晰展示交易进度，成功交易后显示交易哈希和确认数等详细信息。

**Section sources**
- [TransactionExecutor.tsx](file://src/components/Blockchain/TransactionExecutor.tsx#L22-L388)

## 合规验证组件

`KYCVerification` 组件实现了完整的KYC（了解你的客户）身份验证流程，与后端KYC服务集成。该组件采用多步骤表单设计，引导用户完成个人信息、身份文件和商业信息的提交。每个步骤完成后，用户可以进入下一步，最终提交审核。

组件通过 `useState` 管理表单数据和验证状态，包括个人基本信息、上传的文件和商业实体信息。文件上传功能支持身份证、地址证明和自拍照片，上传成功后会显示确认图标。组件使用 `useToast` 提供用户反馈，如文件上传成功提示。

当用户提交KYC申请时，组件会更新状态为"审核中"，并显示相应的状态徽章。进度指示器清晰展示完成步骤和总进度。组件设计考虑了用户体验，提供了详细的字段说明和输入验证，确保提交的信息完整准确。

**Section sources**
- [KYCVerification.tsx](file://src/components/Compliance/KYCVerification.tsx#L21-L517)

## 钱包管理组件

`WalletConnect` 组件实现了钱包连接和余额管理功能，与Wagmi/Ethers库交互。该组件首先检查钱包连接状态，未连接时显示连接选项，支持多种钱包（如MetaMask、WalletConnect）。连接成功后，显示钱包地址、网络信息和稳定币余额。

组件通过 `useAccount`、`useConnect` 和 `useDisconnect` 钩子管理钱包状态。`loadBalances` 函数调用 `WalletService.getStablecoinBalances` 获取DAI和USDC余额，并在UI中展示。地址显示采用缩写格式（如0x123...abc），并提供复制到剪贴板功能。

余额显示区域使用骨架屏加载效果，提升用户体验。每个代币余额卡片显示代币符号、名称和余额数量。组件还提供断开连接按钮，允许用户安全地断开钱包连接。网络信息通过不同颜色徽章标识（如蓝色表示Sepolia测试网）。

**Section sources**
- [WalletConnect.tsx](file://src/components/Wallet/WalletConnect.tsx#L16-L241)

## 监控类组件

### 数据分析组件

`Analytics` 组件实现了交易数据的可视化分析，包含多种图表类型。组件通过模拟数据展示交易量趋势、货币分布和性能指标。时间范围选择器允许用户查看不同周期的数据（今日、7天、30天、90天）。

关键指标卡片显示总交易量、交易笔数、平均金额和成功率，每个指标都有相应的趋势图标。交易量趋势使用面积图展示，交易笔数使用柱状图，货币分布使用饼图。实时数据标签页显示24小时价格和交易量变化。

组件采用响应式设计，图表在不同屏幕尺寸下自动调整布局。加载状态使用骨架屏效果，提升用户体验。性能指标部分通过进度条可视化系统可用性、客户满意度等指标。

**Section sources**
- [Analytics.tsx](file://src/components/Analytics/Analytics.tsx#L47-L402)

### 风险监控组件

`RiskMonitoring` 组件实现了实时风险监控功能，订阅系统风险指标数据。组件每30秒自动更新一次风险指标，包括流动性风险、波动率风险、交易对手风险、操作风险、合规风险和集中度风险。

风险概览部分显示综合风险评分和各状态指标数量。详细风险指标卡片根据风险等级使用不同背景色（安全-绿色，警告-黄色，危险-红色）。每个指标显示当前值、阈值和趋势图标。

当检测到关键或警告风险时，组件会显示醒目警报。风险管理建议部分根据当前风险状况提供具体建议，如降低集中度风险或关注市场波动。组件还提供暂停/开始监控的开关，允许用户控制监控状态。

**Section sources**
- [RiskMonitoring.tsx](file://src/components/Risk/RiskMonitoring.tsx#L28-L331)

## 实时汇率集成组件

### 场外交易组件

`OTCTrading` 组件实现了点对点加密货币交易功能，集成实时汇率。组件支持多种法币（人民币、卢布、美元）和加密货币（USDT、USDC）的交易对。订单簿显示购买和出售订单，每个订单卡显示价格、限额、支付方式和商家评级。

用户可以选择交易对，查看相应的订单。点击订单后进入交易对话框，填写交易金额和选择支付方式。组件根据用户所在国家显示相应的支付方式（如中国用户显示支付宝、微信支付）。商家信任等级通过徽章标识（已认证、高级、标准）。

P2P交易流程包括创建交易、付款确认和放币完成三个步骤。交易聊天功能允许买卖双方沟通。组件还提供发布广告功能，允许用户创建新的交易订单。

**Section sources**
- [OTCTrading.tsx](file://src/components/OTC/OTCTrading.tsx#L57-L434)

### 货币兑换组件

`CurrencyExchange` 组件实现了实时汇率的货币兑换功能。组件自动加载和刷新汇率，支持法币与稳定币之间的兑换。汇率显示区域展示当前汇率和更新时间，来源标识为"Live Rates"。

兑换表单允许用户输入金额，自动计算目标金额。性能指标显示汇率更新时间、预览生成时间和交易处理时间。交易预览功能在执行前显示详细信息，包括处理费、预计时间和价格影响。

组件集成 `exchangeRateService` 和 `transactionService` 服务，确保汇率准确和交易安全。安全合规部分显示KYC/AML合规、多重签名钱包和监管桥接等安全特性。交易执行后，通过对话框显示处理进度和结果。

**Section sources**
- [CurrencyExchange.tsx](file://src/components/Exchange/CurrencyExchange.tsx#L15-L621)

## 响应式布局组件

### 头部组件

`Header` 组件实现了响应式布局策略，适配桌面和移动设备。桌面端显示Logo、导航菜单、系统状态、通知和用户菜单。导航菜单包含仪表板、交易、分析、钱包和合规等主要功能链接。

系统状态显示"系统运行中"徽章。通知图标显示未读通知数量。用户菜单包含个人资料、钱包管理、设置、帮助支持和退出登录选项。移动端通过 `MobileMenu` 组件实现侧边栏导航。

**Section sources**
- [Header.tsx](file://src/components/Layout/Header.tsx#L9-L171)

### 移动菜单组件

`MobileMenu` 组件实现了移动端的侧边栏导航，包含用户信息、导航链接和操作按钮。顶部显示用户头像、姓名、邮箱和认证状态。导航部分包含仪表板、交易记录、数据分析、钱包管理、合规中心和通知中心等链接。

底部包含个人资料、设置、帮助支持和退出登录按钮。菜单使用 `Sheet` 组件实现滑动效果，点击链接后自动关闭。组件通过 `useLocation` 检测当前页面，高亮显示活动菜单项。

**Section sources**
- [MobileMenu.tsx](file://src/components/Layout/MobileMenu.tsx#L31-L138)

### 通知中心组件

`NotificationCenter` 组件实现了WebSocket事件监听功能，管理用户通知。组件显示通知列表，支持按类型过滤（全部、未读、交易、安全、系统、资讯）。每个通知显示类型图标、标题、消息、时间和分类。

用户可以标记通知为已读/未读，或删除通知。批量操作包括标记全部为已读和清空全部通知。通知设置部分允许用户自定义通知渠道（邮件、推送、短信）和类别偏好。

通知统计部分显示未读通知数、总通知数和今日通知数。组件使用 `useToast` 提供操作反馈，如"通知已删除"或"设置已保存"。未读通知在标题旁显示徽章提示。

**Section sources**
- [NotificationCenter.tsx](file://src/components/Notifications/NotificationCenter.tsx#L53-L537)

## 模块化组件

### BRICS模块

`BRICSModule` 组件实现了BRICS稳定币生态系统的模块化设计。组件通过标签页组织功能：概览、稳定币、兑换和跨境支付。概览标签页显示总市值、24小时交易量、活跃用户和支持国家等关键指标。

稳定币标签页列出BRICS数字货币（BCNY、BRUB、BINR等），显示国家、市值和汇率。兑换标签页提供稳定币之间的兑换功能，支持双向兑换。跨境支付标签页展示热门支付路由和与传统SWIFT的对比优势。

组件使用 `useEffect` 加载模拟数据，展示BRICS支付网络状态，包括各节点延迟。设计突出BRICS支付网络的优势：处理时间减少95%、交易成本降低80%、24/7全天候服务等。

**Section sources**
- [BRICSModule.tsx](file://src/components/BRICSModule.tsx#L28-L421)

### 合规模块

`ComplianceModule` 组件实现了模块化合规检查功能。组件包含仪表板、新建检查、检查记录和制裁名单四个标签页。仪表板显示总检查数、已通过、需审查和已拒绝的统计信息。

风险等级分布使用彩色徽章展示低、中、高、关键风险的数量和占比。最近检查部分列出最近的合规检查，显示交易ID、用户ID、风险评分和状态。新建检查表单允许创建新的合规检查，包括用户信息、交易详情和KYC数据。

制裁名单管理部分列出OFAC、欧盟和联合国制裁名单，以及受限国家/地区（如朝鲜、伊朗完全禁止，俄罗斯增强审查）。检查详情模态框显示完整的检查结果，包括风险标记、制裁名单匹配和建议措施。

**Section sources**
- [ComplianceModule.tsx](file://src/components/ComplianceModule.tsx#L52-L728)